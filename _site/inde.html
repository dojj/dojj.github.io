<!doctype html>  
<head>  
      <meta charset="utf-8">  
      <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">   -->
  
      <title>xAPI Video Sample</title>  
  
    <!-- The video used is Big Buck Bunny under Creative commons 3.0.  -->  
    <!-- You can find the movie here: -->  
    <!-- https://peach.blender.org/download/ -->  
        
    <!-- Includes for ADL's xAPI Wrapper -->  
    <!-- Download the files from: -->  
    <!-- https://github.com/adlnet/xAPIWrapper -->  
    <script type="text/javascript" src="lib/cryptojs_v3.1.2.js"></script>  
    <script type="text/javascript" src="lib/xapiwrapper.min.js"></script>  
     
    <script>  
        // this adds the pop-up to ask for the user's name.    
        // We'll build the ACTOR definition  
        // with this first name                              
        var email = prompt("What is your email address?");  
  
        // Set the URL and user credentials for the LRS  
        var conf = {  
            // "endpoint" : "https://lrs.adlnet.gov/xapi/",  
            // "auth" : "Basic " + toBase64("xapi-tools:xapi-tools")  
            "endpoint":"https://lrs.adlnet.gov/xapi/",
            "user":"xapi-workshop",
            "password":"password1234"              
        };  
  
        // Tell the xAPI driver to use these creds  
        ADL.XAPIWrapper.changeConfig(conf);  
  
        // This function will programmatically build the statement using variables  
        function sendxAPIStatement(userName, action) {          
            var statement = {  
                "actor": {  
                    "account": {  
                        "homePage": "http://www.example.com",  
                        "name": userName  
                    },  
                    "objectType": "Agent"  
                },  
                "verb": {  
                    "id": "http://example.com/expapi/verbs/video/" + action,  
                    "display": { "en-US": action }  
                },  
                "object": {  
                    "id": "http://example.com",  
                    "definition": {  
                        "name": { "en-US": "Big Buck Bunny Video" }  
                    },  
                    "objectType": "Activity"  
                }  
            };  
            ADL.XAPIWrapper.sendStatement(statement, function(){});   
            // adding an empty function() at the end of sendStatement tells it to fire asynchronousely   
      };  
  
    </script>  
  
    <!-- -------------------------------- -->  
  
</head>  
  
<body>  
   
    <!-- This sets the HTML video player provided by the browser -->  
    <div align="center">  
        <video id="mediaPlayer" width="720" controls preload="auto">  
            <source src="oceans.mp4" type="video/mp4">  
            Your browser does not support HTML5 video.  
        </video> 
    </div>  
  
    <script>  
   
        // this sets up the Variable "Vid" to point to the video player  
        // so we can interact with it.  
        var vid = document.getElementById("mediaPlayer");  
     

            vid.oncanplay = function() {  
        sendxAPIStatement(email, "Opened")  
        };

        // When the user hits Play...  
             vid.onplay = function() {  
        sendxAPIStatement(email, "Played")  
        }; // End onPlay()  
  
        // When the user hits Pause...  
             vid.onpause = function() {  
        sendxAPIStatement(email, "Pause")  
        };
  
        // When the video completes  
             vid.onended = function() {  
        sendxAPIStatement(email, "completed")  
        }; // End onEnded()  

            vid.onvolumechange = function() {
        sendxAPIStatement(email, "Muted")
        };

    </script>   
  
</body>  
</html> 